"use strict";(self.webpackChunk_lynx_js_react_use=self.webpackChunk_lynx_js_react_use||[]).push([["3732"],{3712:function(e,n,t){t.r(n),t.d(n,{default:()=>d});var r=t(2676),a=t(453);function s(e){let n=Object.assign({h1:"h1",a:"a",blockquote:"blockquote",p:"p",strong:"strong",code:"code",h2:"h2",pre:"pre"},(0,a.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"useimmer",children:["useImmer",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#useimmer",children:"#"})]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Credit:"})," Inspired by ",(0,r.jsx)(n.a,{href:"https://github.com/immerjs/use-immer/tree/master",target:"_blank",rel:"noopener noreferrer",children:"use-immer"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Manage complex nested state with ease using ",(0,r.jsx)(n.a,{href:"https://github.com/immerjs/immer",target:"_blank",rel:"noopener noreferrer",children:"immer"}),". Think of ",(0,r.jsx)(n.code,{children:"useImmer"})," as ",(0,r.jsx)(n.code,{children:"useState"})," but supercharged: you can modify state directly (like ",(0,r.jsx)(n.code,{children:"state.count++"}),") without worrying about immutability rules."]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Learn more about Immer: ",(0,r.jsx)(n.a,{href:"https://github.com/immerjs/immer",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(n.a,{href:"https://github.com/immerjs/immer",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/immerjs/immer"})})]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"usage",children:["Usage",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#usage",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"useImmer"})," works just like ",(0,r.jsx)(n.code,{children:"useState"}),", but the updater function hands you a ",(0,r.jsx)(n.code,{children:"draft"})," that you can modify freely."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useImmer } from '@lynx-js/react-use';\n\nconst JediProfile = () => {\n  const [jedi, updateJedi] = useImmer({\n    alias: 'SkyWalker',\n    stats: {\n      age: 19,\n      midichlorians: 20000,\n    },\n  });\n\n  function updateAlias(alias) {\n    updateJedi((draft) => {\n      draft.alias = alias;\n    });\n  }\n\n  function becomeYounger() {\n    updateJedi((draft) => {\n      draft.stats.age--;\n    });\n  }\n\n  function train() {\n    updateJedi((draft) => {\n      draft.stats.midichlorians += 500;\n    });\n  }\n\n  return (\n    <view>\n      <text>\n        Name: {jedi.alias} (Age: {jedi.stats.age})\n      </text>\n      <text>Power Level: {jedi.stats.midichlorians}</text>\n\n      <input\n        bindinput={(e) => {\n          updateAlias(e.detail.value);\n        }}\n        value={jedi.alias}\n      />\n\n      <view bindtap={becomeYounger}>Rejuvenate</view>\n      <view bindtap={train}>Train Force</view>\n    </view>\n  );\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["When passing a value to the updater instead of a function, ",(0,r.jsx)(n.code,{children:"useImmer"})," hook behaves the same as ",(0,r.jsx)(n.code,{children:"useState"})," hook and updates the state with that value."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const [age, setAge] = useImmer(20);\n\nfunction birthDay(event) {\n  setAge(age + 1);\n  console.log(`Happy birthday #${age} Anon! hope you good`);\n}\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"type-declarations",children:["Type Declarations",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#type-declarations",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export type DraftFunction<S> = (draft: Draft<S>) => void;\nexport type Updater<S> = (arg: S | DraftFunction<S>) => void;\nexport type ImmerHook<S> = [S, Updater<S>];\n\nexport function useImmer<S>(initialValue: S | (() => S)): ImmerHook<S>;\n"})})]})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(s,{...e})}):s(e)}let d=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["en%2Fstate%2FuseImmer.md"]={toc:[{text:"Usage",id:"usage",depth:2},{text:"Type Declarations",id:"type-declarations",depth:2}],title:"useImmer",headingTitle:"useImmer",frontmatter:{}}}}]);